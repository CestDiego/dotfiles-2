var e=45,k=45,l,m=null;function n(a){var b=document.createElement("a");b.href=a;return b.href}function p(a){var b=a.ownerDocument.documentElement,c=a.ownerDocument.defaultView;a=a.getBoundingClientRect();return{left:a.left+c.pageXOffset-b.clientLeft,top:a.top+c.pageYOffset-b.clientTop}}function q(a,b){return-1!=(" "+a.className.replace(/[\t\r\n]/g," ")+" ").indexOf(" "+b+" ")}
function r(a){"IMG"===a.target.tagName&&chrome.storage.sync.get(["sbi_option","sbi_hover_min_dims"],function(b){l=b.sbi_option;if("mouseover"==l&&(b=b.sbi_hover_min_dims,void 0===b&&(b=45),k=e=b,b=a.target,!q(b,"rg_i")&&!q(b,"th")&&!(null!==b.getAttribute("id")&&0==b.getAttribute("id").indexOf("imgthumb")||q(b,"css-3d-layer")))){var c=window.getComputedStyle(b,null),d=b.clientHeight,f=b.clientWidth;if(!(d<e||f<k||"none"==c.getPropertyValue("display"))){var g=p(b),f=g.left+parseFloat(c.paddingLeft)+
f-1-29,h=document.getElementById("sbi_camera_button");h.style.top=(g.top+parseFloat(c.paddingTop)+d-1-27).toString()+"px";h.style.left=f.toString()+"px";h.style.cursor="pointer";h.style.display="inline";h.src=n(b.getAttribute("src"));m=b}}})}
function s(a){if(null!=m){var b=p(m).top,c=p(m).left,d=window.getComputedStyle(m,null),f=parseFloat(d.getPropertyValue("width")),d=parseFloat(d.getPropertyValue("height")),g=a.pageY;a=a.pageX;if(g<=b||g>=b+d||a<=c||a>=c+f)document.getElementById("sbi_camera_button").style.display="none"}}function t(a){chrome.extension.sendMessage({action:"sbiSearch",url:n(m.getAttribute("src")),selected:a,source:"camera_button"})}
window.addEventListener("load",function(a){a=a.target;a instanceof HTMLDocument&&!a.defaultView.frameElement&&(document.addEventListener("mouseover",r,!0),document.addEventListener("mouseout",s,!0),a=document.createElement("div"),a.setAttribute("id","sbi_camera_button"),a.setAttribute("class","sbi_search"),a.setAttribute("style","left:0px;top:0px;position:absolute;width:29px;height:27px;border:none;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px;z-index:2147483647;display:none;"),a.onclick=function(a){a.ctrlKey||
a.button&1?t(!1):t(!0)},document.getElementsByTagName("body")[0].appendChild(a))},!1);
